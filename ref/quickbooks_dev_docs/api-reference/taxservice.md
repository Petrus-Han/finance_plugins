# TaxService

The TaxService resource allows you to perform the following actions:
- Create a new TaxCode object and specify a list of existing tax rates to be associated to that tax code. To retrieve a list of existing TaxCode objects, query the TaxCode resource.
- Create a new TaxRate object, dynamically. To retrieve a list of existing tax rates, query the TaxRate resource.

## Business Rules

- TaxService.RateValue must be between 0 and 100 (%).
- QuickBooks companies based in the US will only display system-created tax agencies. They also only display the associated tax rates available and visible via the QuickBooks UI.
- A single tax rate may not be listed twice in the list of tax rates associated with a new tax code.
- To specify an existing tax rate, query the TaxRate endpoint to determine the Id used for TaxService.TaxRateId.
- To query list of currently defined tax codes, use the TaxCode resource.
- To dynamically create a new tax rate do not specify TaxService.TaxRateId in the create request. But rather, specify TaxService.TaxRateName, TaxService.RateValue and TaxService.TaxAgencyId.
- TaxAgency objects referenced by TaxRate objects created with the TaxService resource must already exist.

## The TaxService Object

### Attributes

| Attribute | Type | Required | Description |
|-----------|------|----------|-------------|
| **TaxCode** | String | Required | Name of new tax code. For current TaxCodes, query the TaxCode resource. Maximum of 100 chars. |
| **TaxRateDetails** | TaxRateDetails[] | Required | Container to hold one or more tax rate specifications. |
| **TaxCodeId** | String | Optional, read only, system defined | The id of the newly created tax code. This is generated by Data Services and returned in the response code. |

### TaxRateDetails Child Attributes

| Attribute | Type | Description |
|-----------|------|-------------|
| **RateValue** | String | The tax rate value (percentage). |
| **TaxRateId** | String | ID of existing tax rate. Do not specify if creating a new tax rate. |
| **TaxApplicableOn** | String | When the tax applies. Valid values: Sales, Purchase. |
| **TaxAgencyId** | String | ID of the tax agency. Required when creating a new tax rate. |
| **TaxRateName** | String | Name of the tax rate. Required when creating a new tax rate. |

### Sample Object

```json
{
  "TaxRateDetails": [
    {
      "RateValue": "8%",
      "TaxRateId": "3",
      "TaxApplicableOn": "Sales",
      "TaxAgencyId": "1",
      "TaxRateName": "myNewTaxRateName"
    },
    {
      "RateValue": "5%",
      "TaxRateId": "2",
      "TaxApplicableOn": "Purchase",
      "TaxAgencyId": "1",
      "TaxRateName": "myExistingTaxRateName"
    }
  ],
  "TaxCodeId": "1",
  "TaxCode": "MyTaxCodeName"
}
```

## Create a TaxService

### Request Attributes

| Attribute | Type | Required | Description |
|-----------|------|----------|-------------|
| **TaxCode** | String | Required | Name of new tax code. To query list of currently defined tax codes, use the TaxCode endpoint. Maximum of 100 chars. |
| **TaxRateDetails** | TaxRateDetails[] | Required | Container to hold one or more tax rate specifications. |

### Returns

Returns the newly created taxservice object.

### Request URL

```
POST /v3/company/<realmID>/taxservice/taxcode
Content type: application/json
Production Base URL: https://quickbooks.api.intuit.com
Sandbox Base URL: https://sandbox-quickbooks.api.intuit.com
```

### Request Body (Create new tax code with new tax rate)

```json
{
  "TaxRateDetails": [
    {
      "RateValue": "8",
      "TaxApplicableOn": "Sales",
      "TaxAgencyId": "1",
      "TaxRateName": "myNewTaxRateName"
    }
  ],
  "TaxCode": "MyTaxCodeName"
}
```

### Response

```json
{
  "TaxRateDetails": [
    {
      "RateValue": "8%",
      "TaxRateId": "3",
      "TaxApplicableOn": "Sales",
      "TaxAgencyId": "1",
      "TaxRateName": "myNewTaxRateName"
    },
    {
      "RateValue": "5%",
      "TaxRateId": "2",
      "TaxApplicableOn": "Purchase",
      "TaxAgencyId": "1",
      "TaxRateName": "myExistingTaxRateName"
    }
  ],
  "TaxCodeId": "1",
  "TaxCode": "MyTaxCodeName"
}
```

## Usage Examples

### Create a Tax Code with Existing Tax Rate

To create a tax code using an existing tax rate, include the `TaxRateId`:

```json
{
  "TaxRateDetails": [
    {
      "TaxRateId": "3",
      "TaxApplicableOn": "Sales"
    }
  ],
  "TaxCode": "MyTaxCodeWithExistingRate"
}
```

### Create a Tax Code with New Tax Rate

To create a tax code with a new tax rate, omit `TaxRateId` and include `TaxRateName`, `RateValue`, and `TaxAgencyId`:

```json
{
  "TaxRateDetails": [
    {
      "RateValue": "7.5",
      "TaxApplicableOn": "Sales",
      "TaxAgencyId": "1",
      "TaxRateName": "New City Tax"
    }
  ],
  "TaxCode": "CityTaxCode"
}
```

### Create a Tax Code with Multiple Tax Rates

To create a tax code with both sales and purchase tax rates:

```json
{
  "TaxRateDetails": [
    {
      "RateValue": "8",
      "TaxApplicableOn": "Sales",
      "TaxAgencyId": "1",
      "TaxRateName": "Sales Tax Rate"
    },
    {
      "RateValue": "5",
      "TaxApplicableOn": "Purchase",
      "TaxAgencyId": "1",
      "TaxRateName": "Purchase Tax Rate"
    }
  ],
  "TaxCode": "ComprehensiveTaxCode"
}
```
