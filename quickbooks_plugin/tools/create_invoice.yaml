identity:
  name: create_invoice
  author: petrus
  label:
    en_US: Create Invoice
    zh_Hans: 创建发票
description:
  human:
    en_US: Create a new invoice in QuickBooks Online for a customer.
    zh_Hans: 在 QuickBooks Online 中为客户创建新发票。
  llm: Create a new invoice in QuickBooks Online. Requires a customer ID and line items. Returns the created invoice details including ID and total amount.
parameters:
  - name: customer_id
    type: string
    required: true
    label:
      en_US: Customer ID
      zh_Hans: 客户 ID
    human_description:
      en_US: The QuickBooks customer ID to invoice
      zh_Hans: 要开票的 QuickBooks 客户 ID
    llm_description: The QuickBooks Online customer ID (numeric string)
    form: llm

  - name: line_items
    type: string
    required: true
    label:
      en_US: Line Items (JSON)
      zh_Hans: 行项目（JSON）
    human_description:
      en_US: "JSON array of line items. Each item: {amount, description, item_id, quantity, unit_price}"
      zh_Hans: "行项目的 JSON 数组。每项: {amount, description, item_id, quantity, unit_price}"
    llm_description: |
      JSON array of invoice line items. Each item should have:
      - amount (required): Line total amount
      - description (optional): Line description
      - item_id (optional): QuickBooks item/product ID
      - quantity (optional): Quantity
      - unit_price (optional): Unit price
      Example: [{"amount": 100, "description": "Consulting services", "quantity": 2, "unit_price": 50}]
    form: llm

  - name: txn_date
    type: string
    required: false
    label:
      en_US: Transaction Date
      zh_Hans: 交易日期
    human_description:
      en_US: Invoice date (YYYY-MM-DD format)
      zh_Hans: 发票日期（YYYY-MM-DD 格式）
    llm_description: Invoice date in YYYY-MM-DD format. Defaults to today if not provided.
    form: llm

  - name: due_date
    type: string
    required: false
    label:
      en_US: Due Date
      zh_Hans: 到期日期
    human_description:
      en_US: Payment due date (YYYY-MM-DD format)
      zh_Hans: 付款到期日期（YYYY-MM-DD 格式）
    llm_description: Payment due date in YYYY-MM-DD format
    form: llm

  - name: doc_number
    type: string
    required: false
    label:
      en_US: Invoice Number
      zh_Hans: 发票编号
    human_description:
      en_US: Custom invoice number (auto-generated if not provided)
      zh_Hans: 自定义发票编号（不提供则自动生成）
    llm_description: Custom invoice number. Auto-generated by QuickBooks if not provided.
    form: llm

  - name: customer_memo
    type: string
    required: false
    label:
      en_US: Customer Memo
      zh_Hans: 客户备注
    human_description:
      en_US: Message visible to the customer
      zh_Hans: 客户可见的消息
    llm_description: Message that will be visible to the customer on the invoice
    form: llm

  - name: private_note
    type: string
    required: false
    label:
      en_US: Private Note
      zh_Hans: 内部备注
    human_description:
      en_US: Internal note (not visible to customer)
      zh_Hans: 内部备注（客户不可见）
    llm_description: Internal note that is not visible to the customer
    form: llm

  - name: bill_email
    type: string
    required: false
    label:
      en_US: Bill Email
      zh_Hans: 账单邮箱
    human_description:
      en_US: Email address to send the invoice to
      zh_Hans: 发送发票的邮箱地址
    llm_description: Email address where the invoice will be sent
    form: llm

extra:
  python:
    source: tools/create_invoice.py

output_schema:
  type: object
  properties:
    success:
      type: boolean
      description:
        en_US: Whether the invoice was created successfully
        zh_Hans: 发票是否创建成功
    id:
      type: string
      description:
        en_US: The unique identifier of the created invoice
        zh_Hans: 创建的发票唯一标识符
    doc_number:
      type: string
      description:
        en_US: The invoice document number
        zh_Hans: 发票文档编号
    txn_date:
      type: string
      description:
        en_US: The transaction date of the invoice
        zh_Hans: 发票的交易日期
    due_date:
      type: string
      description:
        en_US: The payment due date
        zh_Hans: 付款到期日期
    total_amount:
      type: number
      description:
        en_US: The total amount of the invoice
        zh_Hans: 发票总金额
    balance:
      type: number
      description:
        en_US: The remaining balance on the invoice
        zh_Hans: 发票剩余余额
    customer:
      type: string
      description:
        en_US: The customer name
        zh_Hans: 客户名称
    email_status:
      type: string
      description:
        en_US: The email delivery status
        zh_Hans: 电子邮件发送状态
    sync_token:
      type: string
      description:
        en_US: QuickBooks sync token for the record
        zh_Hans: 记录的 QuickBooks 同步令牌
    invoice_link:
      type: string
      description:
        en_US: Link to view the invoice online
        zh_Hans: 在线查看发票的链接
    message:
      type: string
      description:
        en_US: Success message with invoice details
        zh_Hans: 包含发票详情的成功消息
