identity:
  name: transaction
  author: petrus
  label:
    en_US: Transaction Activity
    zh_Hans: 交易动态
    ja_JP: 取引アクティビティ
    fr_FR: Activité de transaction
    es_ES: Actividad de transacción
    pt_BR: Atividade de transação
    ko_KR: 거래 활동

description:
  en_US: Starts your workflow when money moves in or out of your Mercury account. Catches new transactions and status changes.
  zh_Hans: 当您的 Mercury 账户发生收款或付款时启动工作流。捕获新交易和状态变化。
  ja_JP: Mercury アカウントで入出金があるとワークフローを開始。新しい取引とステータス変更を検出します。
  fr_FR: Lance votre workflow lorsque de l'argent entre ou sort de votre compte Mercury. Capture les nouvelles transactions et les changements de statut.
  es_ES: Inicia su flujo de trabajo cuando el dinero entra o sale de su cuenta Mercury. Captura nuevas transacciones y cambios de estado.
  pt_BR: Inicia seu fluxo de trabalho quando o dinheiro entra ou sai da sua conta Mercury. Captura novas transações e mudanças de status.
  ko_KR: Mercury 계좌에서 입출금이 발생하면 워크플로우를 시작합니다. 새 거래와 상태 변경을 감지합니다.

parameters:
- name: operation_filter
  label:
    en_US: Trigger On
    zh_Hans: 触发条件
    ja_JP: トリガー条件
    fr_FR: Déclencher sur
    es_ES: Activar en
    pt_BR: Acionar em
    ko_KR: 트리거 조건
  type: select
  required: false
  default: all
  options:
    - value: all
      label:
        en_US: All Activity
        zh_Hans: 所有活动
        ja_JP: すべての活動
        fr_FR: Toute activité
        es_ES: Toda actividad
        pt_BR: Toda atividade
        ko_KR: 모든 활동
    - value: created
      label:
        en_US: New Transactions Only
        zh_Hans: 仅新交易
        ja_JP: 新規取引のみ
        fr_FR: Nouvelles transactions uniquement
        es_ES: Solo transacciones nuevas
        pt_BR: Apenas novas transações
        ko_KR: 새 거래만
    - value: updated
      label:
        en_US: Status Changes Only
        zh_Hans: 仅状态变更
        ja_JP: ステータス変更のみ
        fr_FR: Changements de statut uniquement
        es_ES: Solo cambios de estado
        pt_BR: Apenas mudanças de status
        ko_KR: 상태 변경만
  description:
    en_US: Choose when to trigger - new transactions, status updates, or both
    zh_Hans: 选择触发时机 - 新交易、状态更新或两者都要
    ja_JP: トリガーのタイミングを選択 - 新規取引、ステータス更新、または両方
    fr_FR: Choisissez quand déclencher - nouvelles transactions, mises à jour de statut, ou les deux
    es_ES: Elija cuándo activar - nuevas transacciones, actualizaciones de estado, o ambas
    pt_BR: Escolha quando acionar - novas transações, atualizações de status, ou ambos
    ko_KR: 트리거 시점 선택 - 새 거래, 상태 업데이트 또는 둘 다

output_schema:
  type: object
  additionalProperties: false
  description: Mercury transaction event payload
  required:
    - event_id
    - transaction_id
    - operation_type
    - account_id
    - amount
    - status
  properties:
    event_id:
      type: string
      description: Unique identifier for the webhook event
    transaction_id:
      type: string
      description: Mercury transaction ID
    operation_type:
      type: string
      enum: [created, updated]
      description: Type of operation (created or updated)
    account_id:
      type: string
      description: Mercury account ID
    amount:
      type: number
      description: Transaction amount (negative for debits, positive for credits)
    status:
      type: string
      description: Transaction status (pending, posted, etc.)
    posted_at:
      type: string
      format: date-time
      description: Transaction posting date
    counterparty_name:
      type: string
      description: Merchant or counterparty name
    bank_description:
      type: string
      description: Bank-provided description
    note:
      type: string
      description: User-provided note
    category:
      type: string
      description: Transaction category
    transaction_type:
      type: string
      description: Transaction type (debit, credit, wire, ach, etc.)

extra:
  python:
    source: events/transaction.py
