identity:
  name: update_transaction
  author: alai-sudo
  label:
    en_US: Update Transaction
    zh_Hans: 更新交易
description:
  human:
    en_US: Update metadata for a transaction (note, category).
    zh_Hans: 更新交易的元数据（备注、分类）。
  llm: Updates transaction metadata like internal notes and category. Cannot modify financial details.
parameters:
  - name: transaction_id
    type: string
    required: true
    label:
      en_US: Transaction ID
      zh_Hans: 交易 ID
    human_description:
      en_US: The unique identifier of the transaction to update
      zh_Hans: 要更新的交易的唯一标识符
    llm_description: Mercury transaction ID (e.g., txn_xxx)
    form: llm

  - name: note
    type: string
    required: false
    label:
      en_US: Note
      zh_Hans: 备注
    human_description:
      en_US: Internal note for this transaction
      zh_Hans: 此交易的内部备注
    llm_description: Internal note to add or update
    form: llm

  - name: category_id
    type: string
    required: false
    label:
      en_US: Category ID
      zh_Hans: 分类 ID
    human_description:
      en_US: Mercury category ID to assign to this transaction
      zh_Hans: 分配给此交易的 Mercury 分类 ID
    llm_description: The category ID to assign
    form: llm

output_schema:
  type: object
  properties:
    success:
      type: boolean
      description: Whether the operation succeeded
    id:
      type: string
      description: Transaction ID
    note:
      type: string
      description: Updated note
    status:
      type: string
      description: Transaction status
    message:
      type: string
      description: Status message

extra:
  python:
    source: tools/update_transaction.py
