identity:
  name: get_transactions
  author: petrus
  label:
    en_US: Get Transactions
    zh_Hans: 获取交易记录
  icon: icon.svg

description:
  human:
    en_US: Retrieve transaction history for Mercury bank accounts with optional date filtering
    zh_Hans: 获取 Mercury 银行账户的交易历史记录，支持日期过滤
  llm: A tool to retrieve transactions for Mercury bank accounts. If account_id is not provided, fetches transactions for all accounts. Supports date range filtering and pagination.

parameters:
  - name: account_id
    type: string
    required: false
    label:
      en_US: Account ID
      zh_Hans: 账户 ID
    human_description:
      en_US: The Mercury account ID to retrieve transactions for. If not provided, fetches transactions for all accounts.
      zh_Hans: 要检索交易的 Mercury 账户 ID。如果不提供，将获取所有账户的交易。
    llm_description: The Mercury account ID to retrieve transactions for. If not provided, fetches transactions for all accounts.
    form: llm

  - name: start_date
    type: string
    required: false
    label:
      en_US: Start Date
      zh_Hans: 开始日期
    human_description:
      en_US: Start date for filtering transactions (ISO 8601 format, e.g., 2026-01-01T00:00:00Z)
      zh_Hans: 过滤交易的开始日期（ISO 8601 格式，例如 2026-01-01T00:00:00Z）
    llm_description: Optional start date for filtering transactions in ISO 8601 format (e.g., 2026-01-01T00:00:00Z)
    form: llm

  - name: end_date
    type: string
    required: false
    label:
      en_US: End Date
      zh_Hans: 结束日期
    human_description:
      en_US: End date for filtering transactions (ISO 8601 format, e.g., 2026-01-31T23:59:59Z)
      zh_Hans: 过滤交易的结束日期（ISO 8601 格式，例如 2026-01-31T23:59:59Z）
    llm_description: Optional end date for filtering transactions in ISO 8601 format (e.g., 2026-01-31T23:59:59Z)
    form: llm

  - name: limit
    type: number
    required: false
    default: 100
    label:
      en_US: Limit
      zh_Hans: 限制数量
    human_description:
      en_US: Maximum number of transactions to return (default 100)
      zh_Hans: 返回的最大交易数量（默认 100）
    llm_description: Maximum number of transactions to return (default 100)
    form: llm

  - name: offset
    type: number
    required: false
    default: 0
    label:
      en_US: Offset
      zh_Hans: 偏移量
    human_description:
      en_US: Number of transactions to skip for pagination (default 0)
      zh_Hans: 用于分页的跳过交易数量（默认 0）
    llm_description: Number of transactions to skip for pagination (default 0)
    form: llm

output_schema:
  type: object
  properties:
    transactions:
      type: array
      description: List of transactions
      items:
        type: object
        properties:
          id:
            type: string
            description: Transaction ID
          amount:
            type: number
            description: Transaction amount
          posted_at:
            type: string
            description: Posted timestamp
          status:
            type: string
            description: Transaction status
          counterparty_name:
            type: string
            description: Counterparty name
          bank_description:
            type: string
            description: Bank description
          note:
            type: string
            description: Internal note
          category:
            type: string
            description: Transaction category
          type:
            type: string
            description: Transaction type
          account_id:
            type: string
            description: Account ID
    count:
      type: number
      description: Number of transactions returned
    total:
      type: number
      description: Total number of transactions matching criteria
    offset:
      type: number
      description: Current offset for pagination
    limit:
      type: number
      description: Maximum results per page

extra:
  python:
    source: tools/get_transactions.py
