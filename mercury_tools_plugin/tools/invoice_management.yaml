identity:
  name: invoice_management
  author: petrus
  label:
    en_US: Manage Invoices
    zh_Hans: 管理发票
    ja_JP: 請求書を管理
    fr_FR: Gérer les factures
    es_ES: Gestionar facturas
    pt_BR: Gerenciar faturas
    ko_KR: 청구서 관리
  icon: icon.svg

description:
  human:
    en_US: Create, view, edit, or cancel invoices to bill your customers. Track payment status and send reminders.
    zh_Hans: 创建、查看、编辑或取消向客户开具的发票。跟踪付款状态并发送提醒。
    ja_JP: 顧客への請求書を作成、表示、編集、またはキャンセル。支払い状況を追跡し、リマインダーを送信。
    fr_FR: Créez, consultez, modifiez ou annulez des factures pour facturer vos clients. Suivez les paiements et envoyez des rappels.
    es_ES: Cree, vea, edite o cancele facturas para cobrar a sus clientes. Rastree el estado de pago y envíe recordatorios.
    pt_BR: Crie, visualize, edite ou cancele faturas para cobrar seus clientes. Acompanhe o status de pagamento e envie lembretes.
    ko_KR: 고객에게 청구서를 생성, 조회, 편집 또는 취소합니다. 결제 상태를 추적하고 알림을 보냅니다.
  llm: A tool to manage AR invoices - supports list all, get by ID, create, update, and cancel operations

parameters:
  - name: operation
    type: select
    required: true
    label:
      en_US: Action
      zh_Hans: 操作
      ja_JP: 操作
      fr_FR: Action
      es_ES: Acción
      pt_BR: Ação
      ko_KR: 작업
    human_description:
      en_US: What would you like to do?
      zh_Hans: 您想做什么？
      ja_JP: 何をしますか？
      fr_FR: Que souhaitez-vous faire ?
      es_ES: ¿Qué le gustaría hacer?
      pt_BR: O que você gostaria de fazer?
      ko_KR: 무엇을 하시겠습니까?
    llm_description: "Operation type: list, get, create, update, or cancel"
    form: llm
    options:
      - value: list
        label:
          en_US: View All Invoices
          zh_Hans: 查看所有发票
          ja_JP: 全請求書を表示
          fr_FR: Voir toutes les factures
          es_ES: Ver todas las facturas
          pt_BR: Ver todas as faturas
          ko_KR: 모든 청구서 보기
      - value: get
        label:
          en_US: View Invoice Details
          zh_Hans: 查看发票详情
          ja_JP: 請求書詳細を表示
          fr_FR: Voir les détails de la facture
          es_ES: Ver detalles de la factura
          pt_BR: Ver detalhes da fatura
          ko_KR: 청구서 상세 보기
      - value: create
        label:
          en_US: Create New Invoice
          zh_Hans: 创建新发票
          ja_JP: 新規請求書を作成
          fr_FR: Créer une nouvelle facture
          es_ES: Crear nueva factura
          pt_BR: Criar nova fatura
          ko_KR: 새 청구서 만들기
      - value: update
        label:
          en_US: Edit Invoice
          zh_Hans: 编辑发票
          ja_JP: 請求書を編集
          fr_FR: Modifier la facture
          es_ES: Editar factura
          pt_BR: Editar fatura
          ko_KR: 청구서 편집
      - value: cancel
        label:
          en_US: Cancel Invoice
          zh_Hans: 取消发票
          ja_JP: 請求書をキャンセル
          fr_FR: Annuler la facture
          es_ES: Cancelar factura
          pt_BR: Cancelar fatura
          ko_KR: 청구서 취소

  - name: invoice_id
    type: string
    required: false
    label:
      en_US: Invoice
      zh_Hans: 发票
      ja_JP: 請求書
      fr_FR: Facture
      es_ES: Factura
      pt_BR: Fatura
      ko_KR: 청구서
    human_description:
      en_US: Select the invoice (required for view, edit, or cancel)
      zh_Hans: 选择发票（查看、编辑或取消时必填）
      ja_JP: 請求書を選択（表示、編集、キャンセル時に必須）
      fr_FR: Sélectionnez la facture (requis pour voir, modifier ou annuler)
      es_ES: Seleccione la factura (requerido para ver, editar o cancelar)
      pt_BR: Selecione a fatura (necessário para ver, editar ou cancelar)
      ko_KR: 청구서를 선택하세요 (조회, 편집 또는 취소 시 필수)
    llm_description: The UUID of the invoice. Required for get, update, and cancel operations.
    form: llm

  - name: customer_id
    type: string
    required: false
    label:
      en_US: Customer
      zh_Hans: 客户
      ja_JP: 顧客
      fr_FR: Client
      es_ES: Cliente
      pt_BR: Cliente
      ko_KR: 고객
    human_description:
      en_US: Who is this invoice for?
      zh_Hans: 这张发票是开给谁的？
      ja_JP: この請求書は誰宛ですか？
      fr_FR: À qui est destinée cette facture ?
      es_ES: ¿Para quién es esta factura?
      pt_BR: Para quem é esta fatura?
      ko_KR: 이 청구서는 누구를 위한 것입니까?
    llm_description: The UUID of the customer receiving the invoice. Required for create.
    form: llm

  - name: destination_account_id
    type: string
    required: false
    label:
      en_US: Receive Payment To
      zh_Hans: 收款账户
      ja_JP: 支払い受取口座
      fr_FR: Recevoir le paiement sur
      es_ES: Recibir pago en
      pt_BR: Receber pagamento em
      ko_KR: 결제 수령 계좌
    human_description:
      en_US: Which Mercury account should receive the payment?
      zh_Hans: 哪个 Mercury 账户接收付款？
      ja_JP: どの Mercury 口座で支払いを受け取りますか？
      fr_FR: Quel compte Mercury doit recevoir le paiement ?
      es_ES: ¿Qué cuenta Mercury debe recibir el pago?
      pt_BR: Qual conta Mercury deve receber o pagamento?
      ko_KR: 어느 Mercury 계좌로 결제를 받으시겠습니까?
    llm_description: The Mercury account ID where payments will be received. Required for create.
    form: llm

  - name: invoice_date
    type: string
    required: false
    label:
      en_US: Invoice Date
      zh_Hans: 发票日期
      ja_JP: 請求日
      fr_FR: Date de facture
      es_ES: Fecha de factura
      pt_BR: Data da fatura
      ko_KR: 청구서 날짜
    human_description:
      en_US: Date of the invoice (YYYY-MM-DD)
      zh_Hans: 发票日期（YYYY-MM-DD）
      ja_JP: 請求書の日付（YYYY-MM-DD）
      fr_FR: Date de la facture (AAAA-MM-JJ)
      es_ES: Fecha de la factura (AAAA-MM-DD)
      pt_BR: Data da fatura (AAAA-MM-DD)
      ko_KR: 청구서 날짜 (YYYY-MM-DD)
    llm_description: The date of the invoice in YYYY-MM-DD format. Required for create.
    form: llm

  - name: due_date
    type: string
    required: false
    label:
      en_US: Payment Due Date
      zh_Hans: 付款截止日期
      ja_JP: 支払期限
      fr_FR: Date d'échéance
      es_ES: Fecha de vencimiento
      pt_BR: Data de vencimento
      ko_KR: 결제 기한
    human_description:
      en_US: When is payment due? (YYYY-MM-DD)
      zh_Hans: 何时到期付款？（YYYY-MM-DD）
      ja_JP: 支払い期限はいつですか？（YYYY-MM-DD）
      fr_FR: Quand le paiement est-il dû ? (AAAA-MM-JJ)
      es_ES: ¿Cuándo vence el pago? (AAAA-MM-DD)
      pt_BR: Quando o pagamento vence? (AAAA-MM-DD)
      ko_KR: 결제 기한은 언제입니까? (YYYY-MM-DD)
    llm_description: The payment due date in YYYY-MM-DD format. Required for create.
    form: llm

  - name: line_items_json
    type: string
    required: false
    label:
      en_US: Items to Bill
      zh_Hans: 账单项目
      ja_JP: 請求項目
      fr_FR: Articles à facturer
      es_ES: Artículos a facturar
      pt_BR: Itens a faturar
      ko_KR: 청구 항목
    human_description:
      en_US: "Items being billed, e.g.: [{\"name\": \"Consulting\", \"quantity\": 10, \"unitPrice\": 150}]"
      zh_Hans: "账单项目，如：[{\"name\": \"咨询服务\", \"quantity\": 10, \"unitPrice\": 150}]"
      ja_JP: "請求項目、例：[{\"name\": \"コンサルティング\", \"quantity\": 10, \"unitPrice\": 150}]"
      fr_FR: "Articles facturés, ex. : [{\"name\": \"Conseil\", \"quantity\": 10, \"unitPrice\": 150}]"
      es_ES: "Artículos facturados, ej.: [{\"name\": \"Consultoría\", \"quantity\": 10, \"unitPrice\": 150}]"
      pt_BR: "Itens faturados, ex.: [{\"name\": \"Consultoria\", \"quantity\": 10, \"unitPrice\": 150}]"
      ko_KR: "청구 항목, 예: [{\"name\": \"컨설팅\", \"quantity\": 10, \"unitPrice\": 150}]"
    llm_description: "JSON array of line items. Each item: {name: string, quantity: number, unitPrice: number, salesTaxRate?: number}"
    form: llm

  - name: invoice_number
    type: string
    required: false
    label:
      en_US: Invoice Number
      zh_Hans: 发票编号
      ja_JP: 請求書番号
      fr_FR: Numéro de facture
      es_ES: Número de factura
      pt_BR: Número da fatura
      ko_KR: 청구서 번호
    human_description:
      en_US: Your custom invoice number (e.g., INV-001)
      zh_Hans: 您的自定义发票编号（如 INV-001）
      ja_JP: "カスタム請求書番号（例：INV-001）"
      fr_FR: Votre numéro de facture personnalisé (ex. INV-001)
      es_ES: Su número de factura personalizado (ej. INV-001)
      pt_BR: Seu número de fatura personalizado (ex. INV-001)
      ko_KR: "사용자 정의 청구서 번호 (예: INV-001)"
    llm_description: Optional custom invoice number visible to the payer
    form: llm

  - name: po_number
    type: string
    required: false
    label:
      en_US: PO Number
      zh_Hans: 采购订单号
      ja_JP: 注文番号
      fr_FR: N° de commande
      es_ES: N° de orden
      pt_BR: N° do pedido
      ko_KR: PO 번호
    human_description:
      en_US: Customer's purchase order number (if provided)
      zh_Hans: 客户的采购订单号（如已提供）
      ja_JP: 顧客の注文番号（ある場合）
      fr_FR: Numéro de bon de commande du client (si fourni)
      es_ES: Número de orden de compra del cliente (si se proporcionó)
      pt_BR: Número do pedido de compra do cliente (se fornecido)
      ko_KR: 고객의 구매 주문 번호 (제공된 경우)
    llm_description: Optional purchase order reference number
    form: llm

  - name: payer_memo
    type: string
    required: false
    label:
      en_US: Message to Customer
      zh_Hans: 给客户的消息
      ja_JP: 顧客へのメッセージ
      fr_FR: Message au client
      es_ES: Mensaje al cliente
      pt_BR: Mensagem ao cliente
      ko_KR: 고객에게 보내는 메시지
    human_description:
      en_US: A note that will appear on the invoice (customer can see this)
      zh_Hans: 将显示在发票上的备注（客户可见）
      ja_JP: 請求書に表示されるメモ（顧客に表示されます）
      fr_FR: Une note qui apparaîtra sur la facture (visible par le client)
      es_ES: Una nota que aparecerá en la factura (el cliente puede verla)
      pt_BR: Uma nota que aparecerá na fatura (o cliente pode ver)
      ko_KR: 청구서에 표시될 메모 (고객이 볼 수 있음)
    llm_description: Optional note visible to the customer on the invoice
    form: llm

  - name: internal_note
    type: string
    required: false
    label:
      en_US: Internal Note
      zh_Hans: 内部备注
      ja_JP: 内部メモ
      fr_FR: Note interne
      es_ES: Nota interna
      pt_BR: Nota interna
      ko_KR: 내부 메모
    human_description:
      en_US: A private note for your records (customer cannot see this)
      zh_Hans: 供内部记录的私人备注（客户看不到）
      ja_JP: 記録用のプライベートメモ（顧客には表示されません）
      fr_FR: Une note privée pour vos dossiers (le client ne la voit pas)
      es_ES: Una nota privada para sus registros (el cliente no puede verla)
      pt_BR: Uma nota privada para seus registros (o cliente não pode ver)
      ko_KR: 내부 기록용 메모 (고객이 볼 수 없음)
    llm_description: Optional internal note not visible to the customer
    form: llm

  - name: credit_card_enabled
    type: boolean
    required: false
    default: true
    label:
      en_US: Accept Credit Card
      zh_Hans: 接受信用卡
      ja_JP: クレジットカード可
      fr_FR: Accepter carte de crédit
      es_ES: Aceptar tarjeta de crédito
      pt_BR: Aceitar cartão de crédito
      ko_KR: 신용카드 허용
    human_description:
      en_US: Allow customer to pay by credit card
      zh_Hans: 允许客户使用信用卡付款
      ja_JP: 顧客がクレジットカードで支払うことを許可
      fr_FR: Autoriser le client à payer par carte de crédit
      es_ES: Permitir que el cliente pague con tarjeta de crédito
      pt_BR: Permitir que o cliente pague com cartão de crédito
      ko_KR: 고객이 신용카드로 결제하도록 허용
    llm_description: Whether to enable credit card payments for this invoice
    form: llm

  - name: ach_debit_enabled
    type: boolean
    required: false
    default: true
    label:
      en_US: Accept Bank Transfer
      zh_Hans: 接受银行转账
      ja_JP: 銀行振込可
      fr_FR: Accepter virement bancaire
      es_ES: Aceptar transferencia bancaria
      pt_BR: Aceitar transferência bancária
      ko_KR: 은행 이체 허용
    human_description:
      en_US: Allow customer to pay by bank transfer (ACH)
      zh_Hans: 允许客户使用银行转账 (ACH) 付款
      ja_JP: 顧客が銀行振込 (ACH) で支払うことを許可
      fr_FR: Autoriser le client à payer par virement bancaire (ACH)
      es_ES: Permitir que el cliente pague por transferencia bancaria (ACH)
      pt_BR: Permitir que o cliente pague por transferência bancária (ACH)
      ko_KR: 고객이 은행 이체 (ACH)로 결제하도록 허용
    llm_description: Whether to enable ACH debit payments for this invoice
    form: llm

output_schema:
  type: object
  properties:
    success:
      type: boolean
      description: Whether the operation succeeded
    operation:
      type: string
      description: The operation that was performed
    invoice:
      type: object
      description: Invoice data (for get/create/update)
    invoices:
      type: array
      description: List of invoices (for list operation)
    message:
      type: string
      description: Status message

extra:
  python:
    source: tools/invoice_management.py
