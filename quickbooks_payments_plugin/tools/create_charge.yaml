identity:
  name: create_charge
  author: petrus
  label:
    en_US: Create Charge
    zh_Hans: 创建支付
  icon: icon.svg
description:
  human:
    en_US: Process a payment using a payment token. The charge will be captured immediately unless capture is set to false.
    zh_Hans: 使用支付令牌处理支付。除非将 capture 设置为 false，否则支付将立即被捕获。
  llm: This tool processes a payment transaction using a payment token created with the create_token tool. The payment can be captured immediately or authorized for later capture.

parameters:
  - name: amount
    type: string
    required: true
    label:
      en_US: Amount
      zh_Hans: 金额
    human_description:
      en_US: Amount to charge (e.g., "10.50")
      zh_Hans: 支付金额（例如 "10.50"）
    llm_description: The amount to charge as a decimal string (e.g., "10.50" for $10.50)
    form: form

  - name: token
    type: string
    required: true
    label:
      en_US: Payment Token
      zh_Hans: 支付令牌
    human_description:
      en_US: Payment token from create_token tool
      zh_Hans: 来自 create_token 工具的支付令牌
    llm_description: The payment token value returned by the create_token tool
    form: form

  - name: currency
    type: select
    required: false
    default: USD
    options:
      - value: USD
        label:
          en_US: USD
          zh_Hans: 美元
    label:
      en_US: Currency
      zh_Hans: 货币
    human_description:
      en_US: Currency code (only USD supported for US payments)
      zh_Hans: 货币代码（美国支付仅支持 USD）
    llm_description: Currency code, currently only USD is supported
    form: form

  - name: capture
    type: select
    required: false
    default: "true"
    options:
      - value: "true"
        label:
          en_US: Capture Immediately
          zh_Hans: 立即捕获
      - value: "false"
        label:
          en_US: Authorize Only
          zh_Hans: 仅授权
    label:
      en_US: Capture
      zh_Hans: 捕获
    human_description:
      en_US: Whether to capture the payment immediately (true) or just authorize it (false)
      zh_Hans: 是否立即捕获支付（true）还是仅授权（false）
    llm_description: Set to true to capture payment immediately, or false to only authorize for later capture
    form: form

  - name: description
    type: string
    required: false
    label:
      en_US: Description
      zh_Hans: 描述
    human_description:
      en_US: Optional description for the charge (e.g., "Payment for Invoice #1234")
      zh_Hans: 支付的可选描述（例如 "Invoice #1234 的支付"）
    llm_description: Optional description or note about this payment transaction
    form: form

  - name: customer_id
    type: string
    required: false
    label:
      en_US: Customer ID
      zh_Hans: 客户 ID
    human_description:
      en_US: Optional QuickBooks customer ID
      zh_Hans: 可选的 QuickBooks 客户 ID
    llm_description: Optional customer identifier in QuickBooks system
    form: form

output_schema:
  type: object
  properties:
    id:
      type: string
      description:
        en_US: Unique identifier for the charge
        zh_Hans: 支付的唯一标识符
    status:
      type: string
      description:
        en_US: Current status of the charge (CAPTURED, AUTHORIZED, etc.)
        zh_Hans: 支付的当前状态（CAPTURED、AUTHORIZED 等）
    amount:
      type: string
      description:
        en_US: Amount charged
        zh_Hans: 支付金额
    currency:
      type: string
      description:
        en_US: Currency code of the charge
        zh_Hans: 支付的货币代码
    created:
      type: string
      description:
        en_US: Timestamp when the charge was created
        zh_Hans: 支付创建的时间戳
    auth_code:
      type: string
      description:
        en_US: Authorization code from the payment processor
        zh_Hans: 来自支付处理器的授权代码
    captured:
      type: boolean
      description:
        en_US: Whether the payment was captured immediately
        zh_Hans: 支付是否已立即捕获
    card:
      type: object
      description:
        en_US: Card details used for the charge (if card payment)
        zh_Hans: 用于支付的卡片详情（如果是卡支付）
      properties:
        number:
          type: string
          description:
            en_US: Masked card number
            zh_Hans: 已屏蔽的卡号
        card_type:
          type: string
          description:
            en_US: Type of card (VISA, MASTERCARD, etc.)
            zh_Hans: 卡片类型（VISA、MASTERCARD 等）
        name:
          type: string
          description:
            en_US: Name on the card
            zh_Hans: 卡上的姓名

extra:
  python:
    source: tools/create_charge.py
